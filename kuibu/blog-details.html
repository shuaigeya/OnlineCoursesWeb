<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Favicon icons -->
    <link href="images/favicon.png" rel="shortcut icon">

    <!-- All CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/themify-icons.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/style.css">


    <script src="../static/js/vue.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="../static/element-ui/lib/theme-chalk/index.css">
    <!-- 引入组件库 -->
    <script src="../static/element-ui/lib/index.js"></script>
    <title></title>
  </head>
  <body>

  <div id="app">
    <!-- Preloader -->
    <div id="preloader">
      <div id="status"></div>
    </div>
    
    <!-- Header strat -->
    <header class="header">
      <div class="container">
        <nav class="navbar">
          <!-- Site logo -->
          <a href="home.html" class="logo">
            <h4>在线课程前台</h4>
          </a>
          <a href="javascript:void(0);" id="mobile-menu-toggler">
            <i class="ti-align-justify"></i>
          </a>
          <ul class="navbar-nav">
            <li>
              <a href="home.html">首页</a>
            </li>

            <li>
              <a href="courses.html">课程</a>
            </li>

            <li >
              <a href="blog.html">博客</a>
            </li>

            <li >
              <a href="myCourse.html">我的课程</a>
            </li>

            <template v-if="user == null">
              <li class="has-menu-child">
                <a href="javascript:void(0);">登录</a>
                <ul class="sub-menu">
                  <li><a href="login.html">登录</a></li>
                  <li><a href="signup.html">注册</a></li>
                </ul>
              </li>
            </template>

            <template v-else>
              <li class="has-menu-child" style="padding-top: 10px; margin-left: 10px">
                <img :src="'../static/img/image/' + user.userHeadPortrait" style="width: 35px;height: 35px;border-radius: 50%">
                <!--              <img src="../static/img/image/1.jpg" style="width: 30px;height: 30px">-->
                <ul class="sub-menu">
                  <li><a href="login.html">我的信息</a></li>
                  <li><a href="login.html">修改信息</a></li>
                  <li><a href="signup.html">退出登录</a></li>
                </ul>
              </li>
              <span style="margin-left: 10px;padding-top: 20px;">{{user.userName}}</span>
            </template>

          </ul>
        </nav>
      </div>
    </header>
    <!-- Header strat -->

    <!-- Page feature start -->
    <section class="page-feature">
      <div class="container text-center">
        <h2>博客详情</h2>
        <div class="breadcrumb">
          <a href="home.html">主页</a>
          <span>/ 博客详情</span>
        </div>
      </div>
    </section>
    <!-- Page feature end -->

    <!-- Blog Posts section start -->
    <section class="blog-posts">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="single-blog-post">
              <figure class="feature-img">
                <img src="images/course-preview.jpg" alt="">
              </figure>
              <div class="entry-content">
                <div class="meta-tags">
                  <a href="#" class="post-meta"><i class="ti-time"></i>{{blog.creationTime}}</a><a href="#" class="post-meta"><i class="ti-user"></i>{{blog.userName}}</a>
                </div>
                <h3>{{blog.blogTitle}}</h3>
                <p>{{blog.blogText}}</p>
              </div>
            </div>
            <div class="comments">
              <h4 class="comment-title">评论</h4>
<!--              <ul>-->
<!--                <li>-->
<!--                  <div class="single-comment">-->
<!--                    <div class="user-thumb">-->
<!--                      <img class="avatar-small circle" src="images/avatar-small.png" alt="">-->
<!--                    </div>-->
<!--                    <div class="comments-body">-->
<!--                      <h4>Kosmi Kotalia</h4>                  -->
<!--                      <p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which.</p>-->
<!--                      <a href="#"><i class="ti-back-right"></i>Reply</a>-->
<!--                    </div>                    -->
<!--                  </div>-->
<!--                  <ul class="cmnt-level-2">-->
<!--                    <li>-->
<!--                      <div class="single-comment">-->
<!--                        <div class="user-thumb">-->
<!--                          <img class="avatar-small circle" src="images/avatar-small.png" alt="">-->
<!--                        </div>-->
<!--                        <div class="comments-body">-->
<!--                          <h4>Kosmi Kotalia</h4>                  -->
<!--                          <p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which.</p>-->
<!--                          <a href="#"><i class="ti-back-right"></i>Reply</a>-->
<!--                        </div>-->
<!--                      </div>-->
<!--                    </li>-->
<!--                  </ul>-->
<!--                </li>-->
<!--                <li>-->
<!--                  <div class="single-comment">-->
<!--                    <div class="user-thumb">-->
<!--                      <img class="avatar-small circle" src="images/avatar-small.png" alt="">-->
<!--                    </div>-->
<!--                    <div class="comments-body">-->
<!--                      <h4>Kosmi Kotalia</h4>                  -->
<!--                      <p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which.</p>-->
<!--                      <a href="#"><i class="ti-back-right"></i>Reply</a>-->
<!--                    </div>-->
<!--                  </div>-->
<!--                </li>-->
<!--              </ul>-->
            </div>
            <div class="comment-form">
              <h4 class="comment-title">发表评论</h4>
              <form action="#">
                <textarea placeholder="Write Comments"></textarea>
                <button class="btn btn-filled btn-round ml-auto"><span class="bh"></span> <span>Submit</span></button>
              </form>
            </div>
          </div>
        </div>        
      </div>
    </section>
    <!-- Blog Posts section end -->

    <!-- Footer strat -->
    <footer class="footer">
      <div class="foo-top">
        <div class="container">
          <div class="row">
            <div class="col-md-3 col-sm-6">
              <div class="widget widget-navigation">
                <h4 class="widget-title">关于我们</h4>
                <ul>
                  <li><a href="#">关于我们</a></li>
                  <li><a href="#">联系我们</a></li>
                </ul>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="widget widget-navigation">
                <h4 class="widget-title">问题反馈</h4>
                <ul>
                  <li><a href="#">问题反馈</a></li>
                  <li><a href="#">提交意见</a></li>
                </ul>
              </div>
            </div>

          </div>
        </div>
      </div>


    </footer>
    <!-- Footer end -->
  </div>
    <!-- JS -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/scripts.js"></script>
    <script src="js/Session.js"></script>
    <script>
      var Main = {
        data() {
          return {
            blog:{},
            comment:[],
            dialogVisible: false,
            user:{},
            videoSrc:''
          }
        },
        methods: {
          broadcast:function(src){
            // alert(src);
            this.videoSrc = src;
            this.dialogVisible=true;
          },
          handleEdit(index, row) {
            console.log(index, row);
          },
          getData:function (id) {
            let _this = this;
            $.ajax({
              type : "get",
              url : "http://localhost:10000/blog/details/"+id,
              dataType : "json",
              contentType : "application/json",
              success:function (result) {
                _this.blog = result.data;
              }
            })
          },
          getComment:function (id) {
            let _this = this;
            $.ajax({
              type : "get",
              url : "1",
              dataType : "json",
              contentType : "application/json",
              success:function (result) {
                _this.comment = result.data;
                console.log(result);
              }
            })
          },
          handleClose(done) {
            done();
          },
        },
        mounted() {
          let _this = this;
          getSession(_this);
          let arr = location.search.substring(1).split('=');
          _this.getData(arr[1]);
          _this.getComment(arr[1]);
        }
      };
      var Ctor = Vue.extend(Main)
      new Ctor().$mount('#app')
    </script>
  </body>
</html>